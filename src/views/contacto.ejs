<% layout('layouts/layout') %>

<section class="max-w-2xl mx-auto p-6 bg-white shadow rounded">
  <h2 class="text-4xl font-bold mb-6 text-center mt-20" style="color: #7B081A;">Contáctanos</h2>
  
  <form id="formContacto" action="/contacto" method="POST" class="space-y-4">
    
    <!-- Nombre -->
    <div>
      <label class="block text-sm font-medium">Nombre</label>
      <input id="nombre" name="nombre" required class="w-full p-2 border rounded focus:outline-none focus:ring focus:border-red-500" />
    </div>
    
    <!-- Correo -->
    <div>
      <label class="block text-sm font-medium">Correo</label>
      <input id="correo" type="email" name="correo" required class="w-full p-2 border rounded focus:outline-none focus:ring focus:border-red-500" />
      <p id="errorCorreo" class="text-sm text-red-500 mt-1 hidden">Correo inválido</p>
    </div>
    
    <!-- Mensaje -->
    <div>
      <label class="block text-sm font-medium">Mensaje</label>
      <textarea name="mensaje" rows="4" required class="w-full p-2 border rounded focus:outline-none focus:ring focus:border-red-500"></textarea>
    </div>
    
    <!-- Botón + estado -->
    <div class="flex items-center gap-4">
      <button id="btnEnviar" type="submit" class="bg-red-600 text-white px-4 py-2 rounded hover:bg-red-700" style="background-color: #7B081A;">
        Enviar
      </button>
      <p id="estadoEnvio" class="text-sm text-gray-500 hidden">Enviando...</p>
    </div>
  </form>
</section>

<!-- Script JS para validación + indicador de carga -->
<script>
  const form = document.getElementById('formContacto');
  const correo = document.getElementById('correo');
  const errorCorreo = document.getElementById('errorCorreo');
  const btnEnviar = document.getElementById('btnEnviar');
  const estadoEnvio = document.getElementById('estadoEnvio');

  // Validación simple de email
  correo.addEventListener('input', () => {
    const emailValido = /^[^@\s]+@[^@\s]+\.[^@\s]+$/.test(correo.value);
    errorCorreo.classList.toggle('hidden', emailValido);
  });

  // Mostrar "enviando..."
  form.addEventListener('submit', () => {
    btnEnviar.disabled = true;
    estadoEnvio.classList.remove('hidden');
  });
</script>
